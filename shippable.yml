build:
  pre_ci_boot:
    image_name: svamann/mubench
    image_tag: latest
    pull: true

language: python

before_script:
  - mkdir -p shippable/codecoverage shippable/testresults
  - sudo chmod +x mubench

script: 
  - nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - mvn test -f benchmark/mubench.cli/pom.xml
  - mvn test -f benchmark/mubench.utils/pom.xml
  - "./mubench detect dummy 1 --only synthetic"
  - "./mubench review:prepare 1"
  - "./mubench review:prepare 2"
  - "./mubench review:prepare 3"
  - "./mubench review:check 1"
  - "./mubench review:check 2"
  - "./mubench review:check 3"
  
notifications:
  email:
    - mattis.kaemmerer@gmx.de
    - amann@cs.tu-darmstadt.de
    - jonas.schlitzer@googlemail.com
