build_environment: 
  ubuntu1204

language: python

python:
  - 3.5

install:
  - apt-get update
  - apt-get install -y oracle-java8-installer
  - apt-get install git
  - apt-get install subversion
  - apt-get install maven
  - apt-get install gradle
  - apt-get install graphviz
  - pip install nose
  - pip install pyyaml

before_script:
  - export JAVA_HOME="/usr/lib/jvm/java-8-oracle"
  - export PATH="$PATH:$JAVA_HOME/bin"
  - update-alternatives --set java "$JAVA_HOME/jre/bin/java"
  - update-alternatives --set javac "$JAVA_HOME/bin/javac"
  - update-alternatives --set javaws "$JAVA_HOME/jre/bin/javaws"
  - java -version
  - git config --global user.email "bob@builder.com"
  - git config --global user.name "Bob the Builder"
  - mkdir -p shippable/codecoverage shippable/testresults
  - sudo chmod +x mubench

script: 
  - nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - mvn test -f benchmark/mubench.cli/pom.xml
  - mvn test -f benchmark/mubench.utils/pom.xml
  - "./mubench detect dummy --only synthetic"
  - "./mubench review:prepare 1"
  - "./mubench review:prepare 2"
  - "./mubench review:prepare 3"
  - "./mubench review:check 1"
  - "./mubench review:check 2"
  - "./mubench review:check 3"
  
notifications:
  email:
    - mattis.kaemmerer@gmx.de
    - amann@cs.tu-darmstadt.de
